import{b as X,ax as qe,r as N,c as k,o as m,R as e,J as t,al as g,a as l,K as ke,S as Ae,u as F,p as ve,ay as Ke,P as I,O as _,I as W,L as Y,az as De,t as xe,X as Ne,ar as je,E as de,Q as se,a6 as oe,W as He,a4 as Ye,aA as fe,aB as ee,w as We,aC as Xe,aD as Ge,aE as Je,au as Qe}from"./vue-Bh7ksF0J.js";import{h as Ze,u as Le,p as et,a as _e,m as tt,d as Ie,f as lt,b as at,l as st,c as ot,e as nt,t as it,E as T,g as ye,r as re,i as dt,j as ut,k as rt,n as Ee,o as ct,q as pt,s as mt,v as ft,w as vt}from"./elementPlus-DoEz3rhs.js";import{a as _t}from"./utils-NIGUFBhG.js";(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))f(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&f(p)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function f(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();const gt="/vite.svg",Q=(a,i)=>{const n=a.__vccOpts||a;for(const[f,o]of i)n[f]=o;return n},yt={id:"app"},ht={class:"sidebar"},bt={class:"logo"},$t={src:gt,alt:"Logo",class:"logo-img"},wt={class:"header-content"},Vt={class:"header-left"},kt={__name:"App",setup(a){const i=qe(),n=X(()=>i.path),f=N(!1),o=()=>{f.value=!f.value};return(u,p)=>{const $=g("el-icon"),A=g("el-menu-item"),E=g("el-menu"),P=g("el-aside"),S=g("el-header"),b=g("router-view"),w=g("el-main"),d=g("el-container");return m(),k("div",yt,[e(d,null,{default:t(()=>[e(P,{width:f.value?"64px":"200px"},{default:t(()=>[l("div",ht,[l("div",bt,[ke(l("img",$t,null,512),[[Ae,f.value]]),ke(l("h2",null,"自媒体自动化运营系统",512),[[Ae,!f.value]])]),e(E,{router:!0,"default-active":n.value,collapse:f.value,class:"sidebar-menu","background-color":"#001529","text-color":"#fff","active-text-color":"#409EFF"},{default:t(()=>[e(A,{index:"/"},{default:t(()=>[e($,null,{default:t(()=>[e(F(Ze))]),_:1}),p[0]||(p[0]=l("span",null,"首页",-1))]),_:1}),e(A,{index:"/account-management"},{default:t(()=>[e($,null,{default:t(()=>[e(F(Le))]),_:1}),p[1]||(p[1]=l("span",null,"账号管理",-1))]),_:1}),e(A,{index:"/material-management"},{default:t(()=>[e($,null,{default:t(()=>[e(F(et))]),_:1}),p[2]||(p[2]=l("span",null,"素材管理",-1))]),_:1}),e(A,{index:"/publish-center"},{default:t(()=>[e($,null,{default:t(()=>[e(F(_e))]),_:1}),p[3]||(p[3]=l("span",null,"发布中心",-1))]),_:1}),e(A,{index:"/website"},{default:t(()=>[e($,null,{default:t(()=>[e(F(tt))]),_:1}),p[4]||(p[4]=l("span",null,"网站",-1))]),_:1}),e(A,{index:"/data"},{default:t(()=>[e($,null,{default:t(()=>[e(F(Ie))]),_:1}),p[5]||(p[5]=l("span",null,"数据",-1))]),_:1})]),_:1},8,["default-active","collapse"])])]),_:1},8,["width"]),e(d,null,{default:t(()=>[e(S,null,{default:t(()=>[l("div",wt,[l("div",Vt,[e($,{class:"toggle-sidebar",onClick:o},{default:t(()=>[e(F(lt))]),_:1})]),p[6]||(p[6]=l("div",{class:"header-right"},null,-1))])]),_:1}),e(w,null,{default:t(()=>[e(b)]),_:1})]),_:1})]),_:1})])}}},Ct=Q(kt,[["__scopeId","data-v-176fbaed"]]),Tt={class:"dashboard"},At={class:"dashboard-content"},Ut={class:"stat-card-content"},Pt={class:"stat-icon"},xt={class:"stat-info"},Mt={class:"stat-value"},St={class:"stat-footer"},Dt={class:"stat-detail"},Lt={class:"stat-card-content"},It={class:"stat-icon platform-icon"},Et={class:"stat-info"},zt={class:"stat-value"},Bt={class:"stat-footer"},Ft={class:"stat-detail"},Rt={class:"stat-card-content"},Ot={class:"stat-icon task-icon"},qt={class:"stat-info"},Kt={class:"stat-value"},Nt={class:"stat-footer"},jt={class:"stat-detail"},Ht={class:"stat-card-content"},Yt={class:"stat-icon content-icon"},Wt={class:"stat-info"},Xt={class:"stat-value"},Gt={class:"stat-footer"},Jt={class:"stat-detail"},Qt={class:"quick-actions"},Zt={class:"action-icon"},el={class:"action-icon"},tl={class:"action-icon"},ll={class:"action-icon"},al={class:"recent-tasks"},sl={class:"section-header"},ol={__name:"Dashboard",setup(a){const i=Ke(),n=ve({total:12,normal:10,abnormal:2}),f=ve({total:4,kuaishou:3,douyin:4,channels:2,xiaohongshu:3}),o=ve({total:24,completed:18,inProgress:5,failed:1}),u=ve({total:36,published:30,draft:6}),p=N([{id:1,title:"快手视频自动发布",platform:"快手",account:"快手账号1",createTime:"2024-05-01 10:30:00",status:"已完成"},{id:2,title:"抖音视频定时发布",platform:"抖音",account:"抖音账号1",createTime:"2024-05-01 11:15:00",status:"进行中"},{id:3,title:"视频号内容上传",platform:"视频号",account:"视频号账号1",createTime:"2024-05-01 14:20:00",status:"待执行"},{id:4,title:"小红书图文发布",platform:"小红书",account:"小红书账号1",createTime:"2024-05-01 16:45:00",status:"已失败"},{id:5,title:"快手短视频批量上传",platform:"快手",account:"快手账号2",createTime:"2024-05-02 09:10:00",status:"待执行"}]),$=w=>({快手:"success",抖音:"danger",视频号:"warning",小红书:"info"})[w]||"info",A=w=>({已完成:"success",进行中:"warning",待执行:"info",已失败:"danger"})[w]||"info",E=w=>{i.push(w)},P=w=>{T.info(`查看任务: ${w.title}`)},S=w=>{ye.confirm(`确定要执行任务 ${w.title} 吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(()=>{const d=p.value.findIndex(R=>R.id===w.id);d!==-1&&(p.value[d].status="进行中"),T({type:"success",message:"任务已开始执行"})}).catch(()=>{})},b=w=>{ye.confirm(`确定要取消任务 ${w.title} 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const d=p.value.findIndex(R=>R.id===w.id);d!==-1&&(p.value[d].status="已取消"),T({type:"success",message:"任务已取消"})}).catch(()=>{})};return(w,d)=>{const R=g("el-icon"),z=g("el-card"),V=g("el-col"),M=g("el-tag"),B=g("el-tooltip"),D=g("el-row"),J=g("el-button"),j=g("el-table-column"),C=g("el-table");return m(),k("div",Tt,[d[19]||(d[19]=l("div",{class:"page-header"},[l("h1",null,"自媒体自动化运营系统")],-1)),l("div",At,[e(D,{gutter:20},{default:t(()=>[e(V,{span:6},{default:t(()=>[e(z,{class:"stat-card"},{default:t(()=>[l("div",Ut,[l("div",Pt,[e(R,null,{default:t(()=>[e(F(Le))]),_:1})]),l("div",xt,[l("div",Mt,I(n.total),1),d[1]||(d[1]=l("div",{class:"stat-label"},"账号总数",-1))])]),l("div",St,[l("div",Dt,[l("span",null,"正常: "+I(n.normal),1),l("span",null,"异常: "+I(n.abnormal),1)])])]),_:1})]),_:1}),e(V,{span:6},{default:t(()=>[e(z,{class:"stat-card"},{default:t(()=>[l("div",Lt,[l("div",It,[e(R,null,{default:t(()=>[e(F(at))]),_:1})]),l("div",Et,[l("div",zt,I(f.total),1),d[2]||(d[2]=l("div",{class:"stat-label"},"平台总数",-1))])]),l("div",Bt,[l("div",Ft,[e(B,{content:"快手账号",placement:"top"},{default:t(()=>[e(M,{size:"small",type:"success"},{default:t(()=>[_(I(f.kuaishou),1)]),_:1})]),_:1}),e(B,{content:"抖音账号",placement:"top"},{default:t(()=>[e(M,{size:"small",type:"danger"},{default:t(()=>[_(I(f.douyin),1)]),_:1})]),_:1}),e(B,{content:"视频号账号",placement:"top"},{default:t(()=>[e(M,{size:"small",type:"warning"},{default:t(()=>[_(I(f.channels),1)]),_:1})]),_:1}),e(B,{content:"小红书账号",placement:"top"},{default:t(()=>[e(M,{size:"small",type:"info"},{default:t(()=>[_(I(f.xiaohongshu),1)]),_:1})]),_:1})])])]),_:1})]),_:1}),e(V,{span:6},{default:t(()=>[e(z,{class:"stat-card"},{default:t(()=>[l("div",Rt,[l("div",Ot,[e(R,null,{default:t(()=>[e(F(st))]),_:1})]),l("div",qt,[l("div",Kt,I(o.total),1),d[3]||(d[3]=l("div",{class:"stat-label"},"任务总数",-1))])]),l("div",Nt,[l("div",jt,[l("span",null,"完成: "+I(o.completed),1),l("span",null,"进行中: "+I(o.inProgress),1),l("span",null,"失败: "+I(o.failed),1)])])]),_:1})]),_:1}),e(V,{span:6},{default:t(()=>[e(z,{class:"stat-card"},{default:t(()=>[l("div",Ht,[l("div",Yt,[e(R,null,{default:t(()=>[e(F(ot))]),_:1})]),l("div",Wt,[l("div",Xt,I(u.total),1),d[4]||(d[4]=l("div",{class:"stat-label"},"内容总数",-1))])]),l("div",Gt,[l("div",Jt,[l("span",null,"已发布: "+I(u.published),1),l("span",null,"草稿: "+I(u.draft),1)])])]),_:1})]),_:1})]),_:1}),l("div",Qt,[d[13]||(d[13]=l("h2",null,"快捷操作",-1)),e(D,{gutter:20},{default:t(()=>[e(V,{span:6},{default:t(()=>[e(z,{class:"action-card",onClick:d[0]||(d[0]=y=>E("/account-management"))},{default:t(()=>[l("div",Zt,[e(R,null,{default:t(()=>[e(F(nt))]),_:1})]),d[5]||(d[5]=l("div",{class:"action-title"},"账号管理",-1)),d[6]||(d[6]=l("div",{class:"action-desc"},"管理所有平台账号",-1))]),_:1})]),_:1}),e(V,{span:6},{default:t(()=>[e(z,{class:"action-card"},{default:t(()=>[l("div",el,[e(R,null,{default:t(()=>[e(F(_e))]),_:1})]),d[7]||(d[7]=l("div",{class:"action-title"},"内容上传",-1)),d[8]||(d[8]=l("div",{class:"action-desc"},"上传视频和图文内容",-1))]),_:1})]),_:1}),e(V,{span:6},{default:t(()=>[e(z,{class:"action-card"},{default:t(()=>[l("div",tl,[e(R,null,{default:t(()=>[e(F(it))]),_:1})]),d[9]||(d[9]=l("div",{class:"action-title"},"定时发布",-1)),d[10]||(d[10]=l("div",{class:"action-desc"},"设置内容发布时间",-1))]),_:1})]),_:1}),e(V,{span:6},{default:t(()=>[e(z,{class:"action-card"},{default:t(()=>[l("div",ll,[e(R,null,{default:t(()=>[e(F(Ie))]),_:1})]),d[11]||(d[11]=l("div",{class:"action-title"},"数据分析",-1)),d[12]||(d[12]=l("div",{class:"action-desc"},"查看内容数据分析",-1))]),_:1})]),_:1})]),_:1})]),l("div",al,[l("div",sl,[d[15]||(d[15]=l("h2",null,"最近任务",-1)),e(J,{text:""},{default:t(()=>[...d[14]||(d[14]=[_("查看全部",-1)])]),_:1})]),e(C,{data:p.value,style:{width:"100%"}},{default:t(()=>[e(j,{prop:"title",label:"任务名称",width:"250"}),e(j,{prop:"platform",label:"平台",width:"120"},{default:t(y=>[e(M,{type:$(y.row.platform),effect:"plain"},{default:t(()=>[_(I(y.row.platform),1)]),_:2},1032,["type"])]),_:1}),e(j,{prop:"account",label:"账号",width:"150"}),e(j,{prop:"createTime",label:"创建时间",width:"180"}),e(j,{prop:"status",label:"状态",width:"120"},{default:t(y=>[e(M,{type:A(y.row.status),effect:"plain"},{default:t(()=>[_(I(y.row.status),1)]),_:2},1032,["type"])]),_:1}),e(j,{label:"操作"},{default:t(y=>[e(J,{size:"small",onClick:K=>P(y.row)},{default:t(()=>[...d[16]||(d[16]=[_("查看",-1)])]),_:1},8,["onClick"]),y.row.status==="待执行"?(m(),W(J,{key:0,size:"small",type:"primary",onClick:K=>S(y.row)},{default:t(()=>[...d[17]||(d[17]=[_(" 执行 ",-1)])]),_:1},8,["onClick"])):Y("",!0),y.row.status!=="已完成"&&y.row.status!=="已失败"?(m(),W(J,{key:1,size:"small",type:"danger",onClick:K=>b(y.row)},{default:t(()=>[...d[18]||(d[18]=[_(" 取消 ",-1)])]),_:1},8,["onClick"])):Y("",!0)]),_:1})]),_:1},8,["data"])])])])}}},nl=Q(ol,[["__scopeId","data-v-db5c2d61"]]),me=_t.create({baseURL:"http://localhost:5409",headers:{"Content-Type":"application/json"}});me.interceptors.request.use(a=>{const i=localStorage.getItem("token");return i&&(a.headers.Authorization=`Bearer ${i}`),a},a=>(console.error("请求错误:",a),Promise.reject(a)));me.interceptors.response.use(a=>{const{data:i}=a;return i.code===200||i.success?i:(T.error(i.message||"请求失败"),Promise.reject(new Error(i.message||"请求失败")))},a=>{if(console.error("响应错误:",a),a.response){const{status:i}=a.response;switch(i){case 401:T.error("未授权，请重新登录");break;case 403:T.error("拒绝访问");break;case 404:T.error("请求地址不存在");break;case 500:T.error("服务器内部错误");break;default:T.error("网络错误")}}else T.error("网络连接失败");return Promise.reject(a)});const ce={get(a,i){return me.get(a,{params:i})},post(a,i,n={}){return me.post(a,i,n)},put(a,i,n={}){return me.put(a,i,n)},delete(a,i){return me.delete(a,{params:i})},upload(a,i){return me.post(a,i,{headers:{"Content-Type":"multipart/form-data"}})}},Ve={getValidAccounts(a){return ce.get("/getValidAccounts",a)},addAccount(a){return ce.post("/account",a)},updateAccount(a){return ce.post("/updateUserinfo",a)},deleteAccount(a){return ce.get(`/deleteAccount?id=${a}`)},openAccounts(a){return ce.post("/openAccounts",{ids:a})}},Me=De("account",()=>{const a=N([]),i={1:"小红书",2:"视频号",3:"抖音",4:"快手",5:"B站"};return{accounts:a,setAccounts:$=>{a.value=$.map(A=>({id:A[0],type:A[1],filePath:A[2],name:A[3],status:A[4]===1?"正常":"异常",platform:i[A[1]]||"未知",avatar:"/vite.svg"}))},addAccount:$=>{a.value.push($)},updateAccount:($,A)=>{const E=a.value.findIndex(P=>P.id===$);E!==-1&&(a.value[E]={...a.value[E],...A})},deleteAccount:$=>{a.value=a.value.filter(A=>A.id!==$)},getAccountsByPlatform:$=>a.value.filter(A=>A.platform===$)}}),Te=De("app",()=>{const a=N(!0),i=N(!0),n=N(!1),f=N([]);return{isFirstTimeAccountManagement:a,isFirstTimeMaterialManagement:i,isAccountRefreshing:n,materials:f,setAccountManagementVisited:()=>{a.value=!1},setMaterialManagementVisited:()=>{i.value=!1},resetVisitStatus:()=>{a.value=!0,i.value=!0},setMaterials:S=>{f.value=S},addMaterial:S=>{f.value.push(S)},removeMaterial:S=>{const b=f.value.findIndex(w=>w.id===S);b>-1&&f.value.splice(b,1)},setAccountRefreshing:S=>{n.value=S}}}),il={class:"account-management","element-loading-text":"正在验证账号..."},dl={class:"account-tabs"},ul={class:"account-list-container"},rl={class:"account-search"},cl={class:"action-buttons"},pl={class:"refresh-text"},ml={key:0,class:"account-list"},fl={key:1,class:"empty-data"},vl={class:"account-list-container"},_l={class:"account-search"},gl={class:"action-buttons"},yl={class:"refresh-text"},hl={key:0,class:"account-list"},bl={key:1,class:"empty-data"},$l={class:"account-list-container"},wl={class:"account-search"},Vl={class:"action-buttons"},kl={class:"refresh-text"},Cl={key:0,class:"account-list"},Tl={key:1,class:"empty-data"},Al={class:"account-list-container"},Ul={class:"account-search"},Pl={class:"action-buttons"},xl={class:"refresh-text"},Ml={key:0,class:"account-list"},Sl={key:1,class:"empty-data"},Dl={class:"account-list-container"},Ll={class:"account-search"},Il={class:"action-buttons"},El={class:"refresh-text"},zl={key:0,class:"account-list"},Bl={key:1,class:"empty-data"},Fl={class:"account-list-container"},Rl={class:"account-search"},Ol={class:"action-buttons"},ql={class:"refresh-text"},Kl={key:0,class:"account-list"},Nl={key:1,class:"empty-data"},jl={key:0,class:"qrcode-container"},Hl={key:0,class:"qrcode-wrapper"},Yl=["src"],Wl={key:1,class:"loading-wrapper"},Xl={key:2,class:"success-wrapper"},Gl={key:3,class:"error-wrapper"},Jl={class:"dialog-footer"},Ql={__name:"AccountManagement",setup(a){const i=Me(),n=Te(),f=N("all"),o=N(""),u=async(x=!1)=>{if(!n.isAccountRefreshing){n.setAccountRefreshing(!0);try{const s=await Ve.getValidAccounts({validate:x?1:0});s.code===200&&s.data?(i.setAccounts(s.data),x&&T.success("账号验证完成"),n.isFirstTimeAccountManagement&&n.setAccountManagementVisited()):T.error("获取账号数据失败")}catch(s){console.error("获取账号数据失败:",s),T.error("获取账号数据失败")}finally{n.setAccountRefreshing(!1)}}};xe(()=>{n.isFirstTimeAccountManagement&&u(!1)});const p=x=>({快手:"success",抖音:"danger",视频号:"warning",小红书:"info"})[x]||"info",$=X(()=>o.value?i.accounts.filter(x=>x.name.includes(o.value)):i.accounts),A=N([]),E=x=>{A.value=x.map(s=>s.id)},P=async()=>{var x;if(A.value.length)try{const s=await Ve.openAccounts(A.value);s.code===200?T.success(`已打开 ${((x=s.data)==null?void 0:x.opened)??A.value.length} 个标签页`):T.error(s.msg||"打开失败")}catch{T.error("打开失败")}},S=X(()=>$.value.filter(x=>x.platform==="快手")),b=X(()=>$.value.filter(x=>x.platform==="抖音")),w=X(()=>$.value.filter(x=>x.platform==="视频号")),d=X(()=>$.value.filter(x=>x.platform==="小红书")),R=X(()=>$.value.filter(x=>x.platform==="B站")),z=()=>{},V=N(!1),M=N("add"),B=N(null),D=ve({id:null,name:"",platform:"",status:"正常"}),J={platform:[{required:!0,message:"请选择平台",trigger:"change"}],name:[{required:!0,message:"请输入账号名称",trigger:"blur"}]},j=N(!1),C=N(""),y=N(""),K=()=>{M.value="add",Object.assign(D,{id:null,name:"",platform:"",status:"正常"}),j.value=!1,C.value="",y.value="",V.value=!0},H=x=>{ye.confirm(`确定要删除账号 ${x.name} 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const s=await Ve.deleteAccount(x.id);s.code===200?(i.deleteAccount(x.id),T({type:"success",message:"删除成功"})):T.error(s.msg||"删除失败")}catch(s){console.error("删除账号失败:",s),T.error("删除账号失败")}}).catch(()=>{})};let te=null;const ae=()=>{te&&(te.close(),te=null)},h=(x,s,q=null)=>{ae(),j.value=!0,C.value="",y.value="";const c={小红书:"1",视频号:"2",抖音:"3",快手:"4",B站:"5"}[x]||"1",r="http://localhost:5409",G=new URLSearchParams({type:c,id:s});q&&(G.append("update","1"),G.append("record_id",String(q)));const le=`${r}/login?${G.toString()}`;te=new EventSource(le),te.onmessage=ie=>{const Z=ie.data;if(console.log("SSE消息:",Z),!C.value&&Z.length>100)try{Z.startsWith("data:image")?C.value=Z:C.value=`data:image/png;base64,${Z}`,console.log("设置二维码数据，长度:",Z.length)}catch(ue){console.error("处理二维码数据出错:",ue)}else(Z==="200"||Z==="500")&&(y.value=Z,Z==="200"?setTimeout(()=>{ae(),setTimeout(()=>{V.value=!1,j.value=!1,T.success(q?"账号更新成功":"账号添加成功"),T({type:"info",message:"正在同步账号信息...",duration:0}),u().then(()=>{T.closeAll(),T.success("账号信息已更新")})},1e3)},1e3):(ae(),setTimeout(()=>{j.value=!1,C.value="",y.value=""},2e3)))},te.onerror=ie=>{console.error("SSE连接错误:",ie),T.error("连接服务器失败，请稍后再试"),ae(),j.value=!1}},U=()=>{B.value.validate(async x=>{if(x)M.value==="add"?h(D.platform,D.name,D.id):T.info("编辑功能已取消，请删除后重新添加");else return!1})},O=x=>{M.value="add",Object.assign(D,{id:x.id,platform:x.platform,name:x.name,status:"正常"}),j.value=!1,C.value="",y.value="",V.value=!0};return Ne(()=>{ae()}),(x,s)=>{const q=g("el-input"),L=g("el-button"),c=g("el-icon"),r=g("el-table-column"),G=g("el-avatar"),le=g("el-tag"),ie=g("el-table"),Z=g("el-empty"),ue=g("el-tab-pane"),ze=g("el-tabs"),ge=g("el-option"),Be=g("el-select"),Se=g("el-form-item"),Fe=g("el-form"),Re=g("el-dialog"),Oe=je("loading");return ke((m(),k("div",il,[s[41]||(s[41]=l("div",{class:"page-header"},[l("h1",null,"账号管理")],-1)),l("div",dl,[e(ze,{modelValue:f.value,"onUpdate:modelValue":s[12]||(s[12]=v=>f.value=v),class:"account-tabs-nav"},{default:t(()=>[e(ue,{label:"全部",name:"all"},{default:t(()=>[l("div",ul,[l("div",rl,[e(q,{modelValue:o.value,"onUpdate:modelValue":s[0]||(s[0]=v=>o.value=v),placeholder:"输入名称或账号搜索","prefix-icon":"Search",clearable:"",onClear:z,onInput:z},null,8,["modelValue"]),l("div",cl,[e(L,{type:"primary",onClick:K},{default:t(()=>[...s[17]||(s[17]=[_("添加账号",-1)])]),_:1}),e(L,{type:"success",onClick:P,disabled:A.value.length===0},{default:t(()=>[...s[18]||(s[18]=[_("作品查看",-1)])]),_:1},8,["disabled"]),e(L,{type:"info",onClick:s[1]||(s[1]=()=>u(!0))},{default:t(()=>[e(c,{class:de({"is-loading":F(n).isAccountRefreshing,"refresh-icon":!0})},{default:t(()=>[e(F(re))]),_:1},8,["class"]),l("span",pl,I(F(n).isAccountRefreshing?"验证中...":"过期验证"),1)]),_:1})])]),$.value.length>0?(m(),k("div",ml,[e(ie,{data:$.value,style:{width:"100%"},onSelectionChange:E},{default:t(()=>[e(r,{type:"selection",width:"55"}),e(r,{label:"头像",width:"80"},{default:t(v=>[e(G,{src:v.row.avatar,size:40},null,8,["src"])]),_:1}),e(r,{prop:"name",label:"名称",width:"180"}),e(r,{prop:"platform",label:"平台"},{default:t(v=>[e(le,{type:p(v.row.platform),effect:"plain"},{default:t(()=>[_(I(v.row.platform),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"status",label:"状态"},{default:t(v=>[e(le,{type:v.row.status==="正常"?"success":"danger",effect:"plain"},{default:t(()=>[_(I(v.row.status),1)]),_:2},1032,["type"])]),_:1}),e(r,{label:"操作"},{default:t(v=>[v.row.status!=="正常"?(m(),W(L,{key:0,size:"small",type:"warning",onClick:ne=>O(v.row)},{default:t(()=>[...s[19]||(s[19]=[_("重新添加",-1)])]),_:1},8,["onClick"])):Y("",!0),e(L,{size:"small",type:"danger",onClick:ne=>H(v.row)},{default:t(()=>[...s[20]||(s[20]=[_("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(m(),k("div",fl,[e(Z,{description:"暂无账号数据"})]))])]),_:1}),e(ue,{label:"快手",name:"kuaishou"},{default:t(()=>[l("div",vl,[l("div",_l,[e(q,{modelValue:o.value,"onUpdate:modelValue":s[2]||(s[2]=v=>o.value=v),placeholder:"输入名称或账号搜索","prefix-icon":"Search",clearable:"",onClear:z,onInput:z},null,8,["modelValue"]),l("div",gl,[e(L,{type:"primary",onClick:K},{default:t(()=>[...s[21]||(s[21]=[_("添加账号",-1)])]),_:1}),e(L,{type:"info",onClick:s[3]||(s[3]=()=>u(!0))},{default:t(()=>[e(c,{class:de({"is-loading":F(n).isAccountRefreshing,"refresh-icon":!0})},{default:t(()=>[e(F(re))]),_:1},8,["class"]),l("span",yl,I(F(n).isAccountRefreshing?"验证中...":"手动过期验证"),1)]),_:1})])]),S.value.length>0?(m(),k("div",hl,[e(ie,{data:S.value,style:{width:"100%"}},{default:t(()=>[e(r,{label:"头像",width:"80"},{default:t(v=>[e(G,{src:v.row.avatar,size:40},null,8,["src"])]),_:1}),e(r,{prop:"name",label:"名称",width:"180"}),e(r,{prop:"platform",label:"平台"},{default:t(v=>[e(le,{type:p(v.row.platform),effect:"plain"},{default:t(()=>[_(I(v.row.platform),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"status",label:"状态"},{default:t(v=>[e(le,{type:v.row.status==="正常"?"success":"danger",effect:"plain"},{default:t(()=>[_(I(v.row.status),1)]),_:2},1032,["type"])]),_:1}),e(r,{label:"操作"},{default:t(v=>[v.row.status!=="正常"?(m(),W(L,{key:0,size:"small",type:"warning",onClick:ne=>O(v.row)},{default:t(()=>[...s[22]||(s[22]=[_("重新添加",-1)])]),_:1},8,["onClick"])):Y("",!0),e(L,{size:"small",type:"danger",onClick:ne=>H(v.row)},{default:t(()=>[...s[23]||(s[23]=[_("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(m(),k("div",bl,[e(Z,{description:"暂无快手账号数据"})]))])]),_:1}),e(ue,{label:"抖音",name:"douyin"},{default:t(()=>[l("div",$l,[l("div",wl,[e(q,{modelValue:o.value,"onUpdate:modelValue":s[4]||(s[4]=v=>o.value=v),placeholder:"输入名称或账号搜索","prefix-icon":"Search",clearable:"",onClear:z,onInput:z},null,8,["modelValue"]),l("div",Vl,[e(L,{type:"primary",onClick:K},{default:t(()=>[...s[24]||(s[24]=[_("添加账号",-1)])]),_:1}),e(L,{type:"info",onClick:s[5]||(s[5]=()=>u(!0))},{default:t(()=>[e(c,{class:de({"is-loading":F(n).isAccountRefreshing,"refresh-icon":!0})},{default:t(()=>[e(F(re))]),_:1},8,["class"]),l("span",kl,I(F(n).isAccountRefreshing?"验证中...":"手动过期验证"),1)]),_:1})])]),b.value.length>0?(m(),k("div",Cl,[e(ie,{data:b.value,style:{width:"100%"}},{default:t(()=>[e(r,{label:"头像",width:"80"},{default:t(v=>[e(G,{src:v.row.avatar,size:40},null,8,["src"])]),_:1}),e(r,{prop:"name",label:"名称",width:"180"}),e(r,{prop:"platform",label:"平台"},{default:t(v=>[e(le,{type:p(v.row.platform),effect:"plain"},{default:t(()=>[_(I(v.row.platform),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"status",label:"状态"},{default:t(v=>[e(le,{type:v.row.status==="正常"?"success":"danger",effect:"plain"},{default:t(()=>[_(I(v.row.status),1)]),_:2},1032,["type"])]),_:1}),e(r,{label:"操作"},{default:t(v=>[v.row.status!=="正常"?(m(),W(L,{key:0,size:"small",type:"warning",onClick:ne=>O(v.row)},{default:t(()=>[...s[25]||(s[25]=[_("重新添加",-1)])]),_:1},8,["onClick"])):Y("",!0),e(L,{size:"small",type:"danger",onClick:ne=>H(v.row)},{default:t(()=>[...s[26]||(s[26]=[_("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(m(),k("div",Tl,[e(Z,{description:"暂无抖音账号数据"})]))])]),_:1}),e(ue,{label:"视频号",name:"channels"},{default:t(()=>[l("div",Al,[l("div",Ul,[e(q,{modelValue:o.value,"onUpdate:modelValue":s[6]||(s[6]=v=>o.value=v),placeholder:"输入名称或账号搜索","prefix-icon":"Search",clearable:"",onClear:z,onInput:z},null,8,["modelValue"]),l("div",Pl,[e(L,{type:"primary",onClick:K},{default:t(()=>[...s[27]||(s[27]=[_("添加账号",-1)])]),_:1}),e(L,{type:"info",onClick:s[7]||(s[7]=()=>u(!0))},{default:t(()=>[e(c,{class:de({"is-loading":F(n).isAccountRefreshing,"refresh-icon":!0})},{default:t(()=>[e(F(re))]),_:1},8,["class"]),l("span",xl,I(F(n).isAccountRefreshing?"验证中...":"手动过期验证"),1)]),_:1})])]),w.value.length>0?(m(),k("div",Ml,[e(ie,{data:w.value,style:{width:"100%"}},{default:t(()=>[e(r,{label:"头像",width:"80"},{default:t(v=>[e(G,{src:v.row.avatar,size:40},null,8,["src"])]),_:1}),e(r,{prop:"name",label:"名称",width:"180"}),e(r,{prop:"platform",label:"平台"},{default:t(v=>[e(le,{type:p(v.row.platform),effect:"plain"},{default:t(()=>[_(I(v.row.platform),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"status",label:"状态"},{default:t(v=>[e(le,{type:v.row.status==="正常"?"success":"danger",effect:"plain"},{default:t(()=>[_(I(v.row.status),1)]),_:2},1032,["type"])]),_:1}),e(r,{label:"操作"},{default:t(v=>[v.row.status!=="正常"?(m(),W(L,{key:0,size:"small",type:"warning",onClick:ne=>O(v.row)},{default:t(()=>[...s[28]||(s[28]=[_("重新添加",-1)])]),_:1},8,["onClick"])):Y("",!0),e(L,{size:"small",type:"danger",onClick:ne=>H(v.row)},{default:t(()=>[...s[29]||(s[29]=[_("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(m(),k("div",Sl,[e(Z,{description:"暂无视频号账号数据"})]))])]),_:1}),e(ue,{label:"小红书",name:"xiaohongshu"},{default:t(()=>[l("div",Dl,[l("div",Ll,[e(q,{modelValue:o.value,"onUpdate:modelValue":s[8]||(s[8]=v=>o.value=v),placeholder:"输入名称或账号搜索","prefix-icon":"Search",clearable:"",onClear:z,onInput:z},null,8,["modelValue"]),l("div",Il,[e(L,{type:"primary",onClick:K},{default:t(()=>[...s[30]||(s[30]=[_("添加账号",-1)])]),_:1}),e(L,{type:"info",onClick:s[9]||(s[9]=()=>u(!0))},{default:t(()=>[e(c,{class:de({"is-loading":F(n).isAccountRefreshing,"refresh-icon":!0})},{default:t(()=>[e(F(re))]),_:1},8,["class"]),l("span",El,I(F(n).isAccountRefreshing?"验证中...":"手动过期验证"),1)]),_:1})])]),d.value.length>0?(m(),k("div",zl,[e(ie,{data:d.value,style:{width:"100%"}},{default:t(()=>[e(r,{label:"头像",width:"80"},{default:t(v=>[e(G,{src:v.row.avatar,size:40},null,8,["src"])]),_:1}),e(r,{prop:"name",label:"名称",width:"180"}),e(r,{prop:"platform",label:"平台"},{default:t(v=>[e(le,{type:p(v.row.platform),effect:"plain"},{default:t(()=>[_(I(v.row.platform),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"status",label:"状态"},{default:t(v=>[e(le,{type:v.row.status==="正常"?"success":"danger",effect:"plain"},{default:t(()=>[_(I(v.row.status),1)]),_:2},1032,["type"])]),_:1}),e(r,{label:"操作"},{default:t(v=>[v.row.status!=="正常"?(m(),W(L,{key:0,size:"small",type:"warning",onClick:ne=>O(v.row)},{default:t(()=>[...s[31]||(s[31]=[_("重新添加",-1)])]),_:1},8,["onClick"])):Y("",!0),e(L,{size:"small",type:"danger",onClick:ne=>H(v.row)},{default:t(()=>[...s[32]||(s[32]=[_("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(m(),k("div",Bl,[e(Z,{description:"暂无小红书账号数据"})]))])]),_:1}),e(ue,{label:"B站",name:"bilibili"},{default:t(()=>[l("div",Fl,[l("div",Rl,[e(q,{modelValue:o.value,"onUpdate:modelValue":s[10]||(s[10]=v=>o.value=v),placeholder:"输入名称或账号搜索","prefix-icon":"Search",clearable:"",onClear:z,onInput:z},null,8,["modelValue"]),l("div",Ol,[e(L,{type:"primary",onClick:K},{default:t(()=>[...s[33]||(s[33]=[_("添加账号",-1)])]),_:1}),e(L,{type:"info",onClick:s[11]||(s[11]=()=>u(!0))},{default:t(()=>[e(c,{class:de({"is-loading":F(n).isAccountRefreshing,"refresh-icon":!0})},{default:t(()=>[e(F(re))]),_:1},8,["class"]),l("span",ql,I(F(n).isAccountRefreshing?"验证中...":"手动过期验证"),1)]),_:1})])]),R.value.length>0?(m(),k("div",Kl,[e(ie,{data:R.value,style:{width:"100%"}},{default:t(()=>[e(r,{label:"头像",width:"80"},{default:t(v=>[e(G,{src:v.row.avatar,size:40},null,8,["src"])]),_:1}),e(r,{prop:"name",label:"名称",width:"180"}),e(r,{prop:"platform",label:"平台"},{default:t(v=>[e(le,{type:p(v.row.platform),effect:"plain"},{default:t(()=>[_(I(v.row.platform),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"status",label:"状态"},{default:t(v=>[e(le,{type:v.row.status==="正常"?"success":"danger",effect:"plain"},{default:t(()=>[_(I(v.row.status),1)]),_:2},1032,["type"])]),_:1}),e(r,{label:"操作"},{default:t(v=>[v.row.status!=="正常"?(m(),W(L,{key:0,size:"small",type:"warning",onClick:ne=>O(v.row)},{default:t(()=>[...s[34]||(s[34]=[_("重新添加",-1)])]),_:1},8,["onClick"])):Y("",!0),e(L,{size:"small",type:"danger",onClick:ne=>H(v.row)},{default:t(()=>[...s[35]||(s[35]=[_("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(m(),k("div",Nl,[e(Z,{description:"暂无B站账号数据"})]))])]),_:1})]),_:1},8,["modelValue"])]),e(Re,{modelValue:V.value,"onUpdate:modelValue":s[16]||(s[16]=v=>V.value=v),title:M.value==="add"?"添加账号":"编辑账号",width:"500px","close-on-click-modal":!1,"close-on-press-escape":!j.value,"show-close":!j.value},{footer:t(()=>[l("span",Jl,[e(L,{onClick:s[15]||(s[15]=v=>V.value=!1)},{default:t(()=>[...s[40]||(s[40]=[_("取消",-1)])]),_:1}),e(L,{type:"primary",onClick:U,loading:j.value,disabled:j.value},{default:t(()=>[_(I(j.value?"请求中":"确认"),1)]),_:1},8,["loading","disabled"])])]),default:t(()=>[e(Fe,{model:D,"label-width":"80px",rules:J,ref_key:"accountFormRef",ref:B},{default:t(()=>[e(Se,{label:"平台",prop:"platform"},{default:t(()=>[e(Be,{modelValue:D.platform,"onUpdate:modelValue":s[13]||(s[13]=v=>D.platform=v),placeholder:"请选择平台",style:{width:"100%"},disabled:M.value==="edit"||j.value},{default:t(()=>[e(ge,{label:"快手",value:"快手"}),e(ge,{label:"抖音",value:"抖音"}),e(ge,{label:"视频号",value:"视频号"}),e(ge,{label:"小红书",value:"小红书"}),e(ge,{label:"B站",value:"B站"})]),_:1},8,["modelValue","disabled"])]),_:1}),e(Se,{label:"名称",prop:"name"},{default:t(()=>[e(q,{modelValue:D.name,"onUpdate:modelValue":s[14]||(s[14]=v=>D.name=v),placeholder:"请输入账号名称",disabled:j.value},null,8,["modelValue","disabled"])]),_:1}),j.value?(m(),k("div",jl,[C.value&&!y.value?(m(),k("div",Hl,[s[36]||(s[36]=l("p",{class:"qrcode-tip"},"请使用对应平台APP扫描二维码登录",-1)),l("img",{src:C.value,alt:"登录二维码",class:"qrcode-image"},null,8,Yl)])):!C.value&&!y.value?(m(),k("div",Wl,[e(c,{class:"is-loading"},{default:t(()=>[e(F(re))]),_:1}),s[37]||(s[37]=l("span",null,"请求中...",-1))])):y.value==="200"?(m(),k("div",Xl,[e(c,null,{default:t(()=>[e(F(dt))]),_:1}),s[38]||(s[38]=l("span",null,"添加成功",-1))])):y.value==="500"?(m(),k("div",Gl,[e(c,null,{default:t(()=>[e(F(ut))]),_:1}),s[39]||(s[39]=l("span",null,"添加失败，请稍后再试",-1))])):Y("",!0)])):Y("",!0)]),_:1},8,["model"])]),_:1},8,["modelValue","title","close-on-press-escape","show-close"])])),[[Oe,F(n).isAccountRefreshing]])}}},Zl=Q(Ql,[["__scopeId","data-v-7d2f1e54"]]),pe={getAllMaterials:()=>ce.get("/getFiles"),uploadMaterial:a=>ce.upload("/uploadSave",a),deleteMaterial:a=>ce.get(`/deleteFile?id=${a}`),downloadMaterial:a=>`http://localhost:5409/download/${a}`,getMaterialPreviewUrl:a=>`http://localhost:5409/getFile?filename=${a}`},ea={class:"material-management"},ta={class:"material-list-container"},la={class:"material-search"},aa={class:"action-buttons"},sa={key:0},oa={key:0,class:"material-list"},na={key:1,class:"empty-data"},ia={class:"upload-form"},da={class:"dialog-footer"},ua={key:0,class:"preview-container"},ra={key:0,class:"video-preview"},ca={controls:"",style:{"max-width":"100%","max-height":"60vh"}},pa=["src"],ma={key:1,class:"image-preview"},fa=["src"],va={key:2,class:"file-info"},_a={__name:"MaterialManagement",setup(a){const i=Te(),n=N(""),f=N(!1),o=N(!1),u=N(!1),p=N(!1),$=N(null),A=N([]),E=N(""),P=async()=>{f.value=!0;try{const C=await pe.getAllMaterials();C.code===200?(i.setMaterials(C.data),T.success("刷新成功")):T.error("获取素材列表失败")}catch(C){console.error("获取素材列表出错:",C),T.error("获取素材列表失败")}finally{f.value=!1}},S=X(()=>{if(!n.value)return i.materials;const C=n.value.toLowerCase();return i.materials.filter(y=>y.filename.toLowerCase().includes(C))}),b=()=>{},w=()=>{A.value=[],E.value="",u.value=!0},d=()=>{A.value=[],E.value=""},R=(C,y)=>{console.log("选择的文件:",C),C.raw&&(A.value=[C])},z=async()=>{if(A.value.length===0){T.warning("请选择要上传的文件");return}const C=A.value[0];if(!C||!C.raw){T.warning("文件对象无效，请重新选择文件");return}o.value=!0;try{const y=new FormData;console.log("上传文件对象:",C.raw),y.append("file",C.raw),E.value.trim()&&(y.append("filename",E.value.trim()),console.log("自定义文件名:",E.value.trim()));const K=await pe.uploadMaterial(y);K.code===200?(T.success("上传成功"),u.value=!1,await P()):T.error(K.msg||"上传失败")}catch(y){console.error("上传素材出错:",y),T.error("上传失败: "+(y.message||"未知错误"))}finally{o.value=!1}},V=async C=>{$.value=null,p.value=!0,T.info("加载中...");try{await new Promise(y=>setTimeout(y,100)),$.value=C}catch(y){console.error("预览素材出错:",y),T.error("预览加载失败"),p.value=!1}},M=C=>{ye.confirm(`确定要删除素材 ${C.filename} 吗？`,"警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const y=await pe.deleteMaterial(C.id);y.code===200?(i.removeMaterial(C.id),T.success("删除成功")):T.error(y.msg||"删除失败")}catch(y){console.error("删除素材出错:",y),T.error("删除失败")}}).catch(()=>{})},B=C=>{const y=C.split("/").pop();return pe.getMaterialPreviewUrl(y)},D=C=>{const y=pe.downloadMaterial(C.file_path);window.open(y,"_blank")},J=C=>[".mp4",".avi",".mov",".wmv",".flv",".mkv"].some(K=>C.toLowerCase().endsWith(K)),j=C=>[".jpg",".jpeg",".png",".gif",".bmp",".webp"].some(K=>C.toLowerCase().endsWith(K));return xe(()=>{i.materials.length===0&&P()}),(C,y)=>{const K=g("el-input"),H=g("el-button"),te=g("el-icon"),ae=g("el-table-column"),h=g("el-table"),U=g("el-empty"),O=g("el-form-item"),x=g("el-upload"),s=g("el-form"),q=g("el-dialog");return m(),k("div",ea,[y[14]||(y[14]=l("div",{class:"page-header"},[l("h1",null,"素材管理")],-1)),l("div",ta,[l("div",la,[e(K,{modelValue:n.value,"onUpdate:modelValue":y[0]||(y[0]=L=>n.value=L),placeholder:"输入文件名搜索","prefix-icon":"Search",clearable:"",onClear:b,onInput:b},null,8,["modelValue"]),l("div",aa,[e(H,{type:"primary",onClick:w},{default:t(()=>[...y[6]||(y[6]=[_("上传素材",-1)])]),_:1}),e(H,{type:"info",onClick:P,loading:!1},{default:t(()=>[e(te,{class:de({"is-loading":f.value})},{default:t(()=>[e(F(re))]),_:1},8,["class"]),f.value?(m(),k("span",sa,"刷新中")):Y("",!0)]),_:1})])]),S.value.length>0?(m(),k("div",oa,[e(h,{data:S.value,style:{width:"100%"}},{default:t(()=>[e(ae,{prop:"filename",label:"文件名",width:"300"}),e(ae,{prop:"filesize",label:"文件大小",width:"120"},{default:t(L=>[_(I(L.row.filesize)+" MB ",1)]),_:1}),e(ae,{prop:"upload_time",label:"上传时间",width:"180"}),e(ae,{label:"操作"},{default:t(L=>[e(H,{size:"small",onClick:c=>V(L.row)},{default:t(()=>[...y[7]||(y[7]=[_("预览",-1)])]),_:1},8,["onClick"]),e(H,{size:"small",type:"danger",onClick:c=>M(L.row)},{default:t(()=>[...y[8]||(y[8]=[_("删除",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])])):(m(),k("div",na,[e(U,{description:"暂无素材数据"})]))]),e(q,{modelValue:u.value,"onUpdate:modelValue":y[3]||(y[3]=L=>u.value=L),title:"上传素材",width:"40%",onClose:d},{footer:t(()=>[l("div",da,[e(H,{onClick:y[2]||(y[2]=L=>u.value=!1)},{default:t(()=>[...y[11]||(y[11]=[_("取消",-1)])]),_:1}),e(H,{type:"primary",onClick:z,loading:o.value},{default:t(()=>[_(I(o.value?"上传中":"确认上传"),1)]),_:1},8,["loading"])])]),default:t(()=>[l("div",ia,[e(s,{"label-width":"80px"},{default:t(()=>[e(O,{label:"文件名称:"},{default:t(()=>[e(K,{modelValue:E.value,"onUpdate:modelValue":y[1]||(y[1]=L=>E.value=L),placeholder:"选填",clearable:""},null,8,["modelValue"])]),_:1}),e(O,{label:"选择文件"},{default:t(()=>[e(x,{class:"upload-demo",drag:"","auto-upload":!1,"on-change":R,"file-list":A.value,limit:1},{tip:t(()=>[...y[9]||(y[9]=[l("div",{class:"el-upload__tip"}," 支持视频、图片等格式文件，只能上传一个文件 ",-1)])]),default:t(()=>[e(te,{class:"el-icon--upload"},{default:t(()=>[e(F(_e))]),_:1}),y[10]||(y[10]=l("div",{class:"el-upload__text"},[_(" 将文件拖到此处，或"),l("em",null,"点击上传")],-1))]),_:1},8,["file-list"])]),_:1})]),_:1})])]),_:1},8,["modelValue"]),e(q,{modelValue:p.value,"onUpdate:modelValue":y[5]||(y[5]=L=>p.value=L),title:"素材预览",width:"50%",top:"10vh"},{default:t(()=>[$.value?(m(),k("div",ua,[J($.value.filename)?(m(),k("div",ra,[l("video",ca,[l("source",{src:B($.value.file_path),type:"video/mp4"},null,8,pa),y[12]||(y[12]=_(" 您的浏览器不支持视频播放 ",-1))])])):j($.value.filename)?(m(),k("div",ma,[l("img",{src:B($.value.file_path),style:{"max-width":"100%","max-height":"60vh"}},null,8,fa)])):(m(),k("div",va,[l("p",null,"文件名: "+I($.value.filename),1),l("p",null,"文件大小: "+I($.value.filesize)+" MB",1),l("p",null,"上传时间: "+I($.value.upload_time),1),e(H,{type:"primary",onClick:y[4]||(y[4]=L=>D($.value))},{default:t(()=>[...y[13]||(y[13]=[_("下载文件",-1)])]),_:1})]))])):Y("",!0)]),_:1},8,["modelValue"])])}}},ga=Q(_a,[["__scopeId","data-v-3d75da5e"]]),Ce={DOUYIN:{key:3,name:"抖音",titleLimit:30,topicLimit:5,titlePlaceholder:"请输入标题（最多30字）",topicPlaceholder:"最多可添加5个话题"},KUAISHOU:{key:4,name:"快手",titleLimit:30,topicLimit:3,titlePlaceholder:"请输入标题（最多30字）",topicPlaceholder:"最多可添加3个话题"},WEIXIN:{key:2,name:"视频号",titleLimit:16,topicLimit:20,titlePlaceholder:"请输入标题（最多16字）",topicPlaceholder:"最多可添加20个话题"},XIAOHONGSHU:{key:1,name:"小红书",titleLimit:20,topicLimit:10,titlePlaceholder:"请输入标题（最多20字）",topicPlaceholder:"最多可添加10个话题"}};Ce.BILIBILI={key:5,name:"B站",titleLimit:80,topicLimit:10,titlePlaceholder:"请输入标题（最多80字）",topicPlaceholder:"最多可添加10个话题"};function he(a){return Object.values(Ce).find(i=>i.key===a)||Ce.XIAOHONGSHU}function ya(){return Object.values(Ce)}function Ue(a,i){const n=he(i);return!a||!a.trim()?{valid:!1,message:"请输入标题"}:a.length>n.titleLimit?{valid:!1,message:`标题不能超过${n.titleLimit}字，当前${a.length}字`}:{valid:!0,message:""}}function Pe(a,i){const n=he(i);return Array.isArray(a)?a.length>n.topicLimit?{valid:!1,message:`最多只能添加${n.topicLimit}个话题，当前${a.length}个`}:{valid:!0,message:""}:{valid:!1,message:"话题格式错误"}}function ha(a){return!a||!a.trim()?{valid:!1,message:"话题内容不能为空"}:a.length>20?{valid:!1,message:"单个话题不能超过20字"}:/[<>{}[\]()&$#@!%^*+=|\\/]/g.test(a)?{valid:!1,message:"话题不能包含特殊字符"}:{valid:!0,message:""}}function ba(a){const i={};let n=!0;(!a.fileList||a.fileList.length===0)&&(i.fileList="请先上传视频文件",n=!1);const f=Ue(a.title,a.selectedPlatform);f.valid||(i.title=f.message,n=!1),a.selectedPlatform||(i.platform="请选择发布平台",n=!1),(!a.selectedAccounts||a.selectedAccounts.length===0)&&(i.accounts="请选择发布账号",n=!1);const o=Pe(a.selectedTopics,a.selectedPlatform);return o.valid||(i.topics=o.message,n=!1),a.scheduleEnabled&&((!a.videosPerDay||a.videosPerDay<1||a.videosPerDay>55)&&(i.videosPerDay="每天发布视频数必须在1-55之间",n=!1),(!a.dailyTimes||a.dailyTimes.length===0)&&(i.dailyTimes="请设置发布时间",n=!1),a.dailyTimes&&a.dailyTimes.length!==a.videosPerDay&&(i.dailyTimes="发布时间数量必须与每天发布视频数一致",n=!1),(a.startDays===void 0||a.startDays<0)&&(i.startDays="请选择开始天数",n=!1)),{valid:n,errors:i}}const $a={class:"tab-management"},wa={class:"tab-header"},Va={class:"tab-list"},ka=["onClick"],Ca={class:"tab-actions"},Ta={__name:"TabManagement",props:{tabs:{type:Array,required:!0},activeTab:{type:String,required:!0},batchPublishing:{type:Boolean,default:!1}},emits:["tab-change","remove-tab","add-tab","batch-publish"],setup(a){return(i,n)=>{const f=g("el-icon"),o=g("el-button");return m(),k("div",$a,[l("div",wa,[l("div",Va,[(m(!0),k(se,null,oe(a.tabs,u=>(m(),k("div",{key:u.name,class:de(["tab-item",{active:a.activeTab===u.name}]),onClick:p=>i.$emit("tab-change",u.name)},[l("span",null,I(u.label),1),a.tabs.length>1?(m(),W(f,{key:0,class:"close-icon",onClick:He(p=>i.$emit("remove-tab",u.name),["stop"])},{default:t(()=>[e(F(Ee))]),_:1},8,["onClick"])):Y("",!0)],10,ka))),128))]),l("div",Ca,[e(o,{type:"primary",size:"small",onClick:n[0]||(n[0]=u=>i.$emit("add-tab")),class:"add-tab-btn"},{default:t(()=>[e(f,null,{default:t(()=>[e(F(rt))]),_:1}),n[2]||(n[2]=_(" 添加Tab ",-1))]),_:1}),e(o,{type:"success",size:"small",onClick:n[1]||(n[1]=u=>i.$emit("batch-publish")),loading:a.batchPublishing,class:"batch-publish-btn"},{default:t(()=>[...n[3]||(n[3]=[_(" 批量发布 ",-1)])]),_:1},8,["loading"])])])])}}},Aa=Q(Ta,[["__scopeId","data-v-7584dadb"]]),Ua={class:"upload-section"},Pa={class:"upload-options"},xa={key:0,class:"uploaded-files"},Ma={class:"file-list"},Sa={class:"file-size"},Da={class:"upload-options-content"},La={class:"material-library-content"},Ia={class:"material-list"},Ea={class:"material-info"},za={class:"material-name"},Ba={class:"material-details"},Fa={class:"file-size"},Ra={class:"upload-time"},Oa={class:"dialog-footer"},qa={__name:"VideoUpload",props:{fileList:{type:Array,default:()=>[]},uploadAction:{type:String,required:!0},authHeaders:{type:Object,required:!0},materials:{type:Array,default:()=>[]}},emits:["show-upload-options","remove-file","upload-success","material-selected"],setup(a,{expose:i,emit:n}){const f=a,o=n,u=Te(),p=N(!1),$=N(!1),A=N(!1),E=N([]),P=()=>{p.value=!1,$.value=!0},S=async()=>{if(p.value=!1,f.materials.length===0)try{const z=await pe.getAllMaterials();if(z.code===200)u.setMaterials(z.data);else{T.error("获取素材列表失败");return}}catch(z){console.error("获取素材列表出错:",z),T.error("获取素材列表失败");return}E.value=[],A.value=!0},b=(z,V)=>{z.code===200?(o("upload-success",z,V),$.value=!1,T.success("文件上传成功")):T.error(z.msg||"上传失败")},w=z=>{T.error("文件上传失败"),console.error("上传错误:",z)},d=()=>{if(E.value.length===0){T.warning("请选择至少一个素材");return}o("material-selected",E.value);const z=E.value.length;A.value=!1,E.value=[],T.success(`已添加 ${z} 个素材`)},R=()=>{p.value=!0};return i({showUploadOptions:R}),(z,V)=>{const M=g("el-icon"),B=g("el-button"),D=g("el-link"),J=g("el-dialog"),j=g("el-upload"),C=g("el-checkbox"),y=g("el-checkbox-group");return m(),k("div",Ua,[V[14]||(V[14]=l("h3",null,"视频",-1)),l("div",Pa,[e(B,{type:"primary",onClick:R,class:"upload-btn"},{default:t(()=>[e(M,null,{default:t(()=>[e(F(_e))]),_:1}),V[5]||(V[5]=_(" 上传视频 ",-1))]),_:1})]),a.fileList.length>0?(m(),k("div",xa,[V[7]||(V[7]=l("h4",null,"已上传文件：",-1)),l("div",Ma,[(m(!0),k(se,null,oe(a.fileList,(K,H)=>(m(),k("div",{key:H,class:"file-item"},[e(D,{href:K.url,target:"_blank",type:"primary"},{default:t(()=>[_(I(K.name),1)]),_:2},1032,["href"]),l("span",Sa,I((K.size/1024/1024).toFixed(2))+"MB",1),e(B,{type:"danger",size:"small",onClick:te=>z.$emit("remove-file",H)},{default:t(()=>[...V[6]||(V[6]=[_("删除",-1)])]),_:1},8,["onClick"])]))),128))])])):Y("",!0),e(J,{modelValue:p.value,"onUpdate:modelValue":V[0]||(V[0]=K=>p.value=K),title:"选择上传方式",width:"400px",class:"upload-options-dialog"},{default:t(()=>[l("div",Da,[e(B,{type:"primary",onClick:P,class:"option-btn"},{default:t(()=>[e(M,null,{default:t(()=>[e(F(_e))]),_:1}),V[8]||(V[8]=_(" 本地上传 ",-1))]),_:1}),e(B,{type:"success",onClick:S,class:"option-btn"},{default:t(()=>[e(M,null,{default:t(()=>[e(F(ct))]),_:1}),V[9]||(V[9]=_(" 素材库 ",-1))]),_:1})])]),_:1},8,["modelValue"]),e(J,{modelValue:$.value,"onUpdate:modelValue":V[1]||(V[1]=K=>$.value=K),title:"本地上传",width:"600px",class:"local-upload-dialog"},{default:t(()=>[e(j,{class:"video-upload",drag:"","auto-upload":!0,action:a.uploadAction,"on-success":b,"on-error":w,multiple:"",accept:"video/*",headers:a.authHeaders},{tip:t(()=>[...V[10]||(V[10]=[l("div",{class:"el-upload__tip"}," 支持MP4、AVI等视频格式，可上传多个文件 ",-1)])]),default:t(()=>[e(M,{class:"el-icon--upload"},{default:t(()=>[e(F(_e))]),_:1}),V[11]||(V[11]=l("div",{class:"el-upload__text"},[_(" 将视频文件拖到此处，或"),l("em",null,"点击上传")],-1))]),_:1},8,["action","headers"])]),_:1},8,["modelValue"]),e(J,{modelValue:A.value,"onUpdate:modelValue":V[4]||(V[4]=K=>A.value=K),title:"选择素材",width:"800px",class:"material-library-dialog"},{footer:t(()=>[l("div",Oa,[e(B,{onClick:V[3]||(V[3]=K=>A.value=!1)},{default:t(()=>[...V[12]||(V[12]=[_("取消",-1)])]),_:1}),e(B,{type:"primary",onClick:d},{default:t(()=>[...V[13]||(V[13]=[_("确定",-1)])]),_:1})])]),default:t(()=>[l("div",La,[e(y,{modelValue:E.value,"onUpdate:modelValue":V[2]||(V[2]=K=>E.value=K)},{default:t(()=>[l("div",Ia,[(m(!0),k(se,null,oe(a.materials,K=>(m(),k("div",{key:K.id,class:"material-item"},[e(C,{label:K.id,class:"material-checkbox"},{default:t(()=>[l("div",Ea,[l("div",za,I(K.filename),1),l("div",Ba,[l("span",Fa,I(K.filesize)+"MB",1),l("span",Ra,I(K.upload_time),1)])])]),_:2},1032,["label"])]))),128))])]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])])}}},Ka=Q(qa,[["__scopeId","data-v-a4989d91"]]),Na={class:"platform-section"},ja={key:0,class:"platform-tips"},Ha={__name:"PlatformSelection",props:{modelValue:{type:Number,required:!0}},emits:["update:modelValue","platform-change"],setup(a,{emit:i}){const n=a,f=i,o=ya(),u=X({get:()=>n.modelValue,set:A=>f("update:modelValue",A)}),p=X(()=>he(n.modelValue)),$=A=>{f("platform-change",A)};return(A,E)=>{const P=g("el-radio"),S=g("el-radio-group"),b=g("el-alert");return m(),k("div",Na,[E[1]||(E[1]=l("h3",null,"平台",-1)),e(S,{modelValue:u.value,"onUpdate:modelValue":E[0]||(E[0]=w=>u.value=w),onChange:$,class:"platform-radios"},{default:t(()=>[(m(!0),k(se,null,oe(F(o),w=>(m(),W(P,{key:w.key,label:w.key,class:"platform-radio"},{default:t(()=>[_(I(w.name),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"]),p.value?(m(),k("div",ja,[e(b,{title:`${p.value.name}平台限制：标题最多${p.value.titleLimit}字，话题最多${p.value.topicLimit}个`,type:"info",closable:!1,"show-icon":"",class:"platform-alert"},null,8,["title"])])):Y("",!0)])}}},Ya=Q(Ha,[["__scopeId","data-v-4ae792d5"]]),Wa={class:"account-section"},Xa={class:"account-display"},Ga={class:"selected-accounts"},Ja={class:"account-dialog-content"},Qa={class:"account-list"},Za={class:"account-info"},es={class:"account-name"},ts={class:"dialog-footer"},ls={__name:"AccountSelection",props:{modelValue:{type:Array,default:()=>[]},platformKey:{type:Number,required:!0}},emits:["update:modelValue"],setup(a,{emit:i}){const n=a,f=i,o=Me(),u=X({get:()=>n.modelValue,set:w=>f("update:modelValue",w)}),p=N(!1),$=N([]),A=X(()=>{const d={3:"抖音",2:"视频号",1:"小红书",4:"快手",5:"B站"}[n.platformKey];return d?o.accounts.filter(R=>R.platform===d):[]}),E=()=>{$.value=[...u.value],p.value=!0},P=()=>{u.value=[...$.value],p.value=!1,T.success("账号选择完成")},S=w=>{u.value.splice(w,1)},b=w=>{const d=o.accounts.find(R=>R.id===w);return d?d.name:w};return(w,d)=>{const R=g("el-tag"),z=g("el-button"),V=g("el-checkbox"),M=g("el-checkbox-group"),B=g("el-dialog");return m(),k("div",Wa,[d[6]||(d[6]=l("h3",null,"账号",-1)),l("div",Xa,[l("div",Ga,[(m(!0),k(se,null,oe(u.value,(D,J)=>(m(),W(R,{key:J,closable:"",onClose:j=>S(J),class:"account-tag"},{default:t(()=>[_(I(b(D)),1)]),_:2},1032,["onClose"]))),128))]),e(z,{type:"primary",plain:"",onClick:E,class:"select-account-btn"},{default:t(()=>[...d[3]||(d[3]=[_(" 选择账号 ",-1)])]),_:1})]),e(B,{modelValue:p.value,"onUpdate:modelValue":d[2]||(d[2]=D=>p.value=D),title:"选择账号",width:"600px",class:"account-dialog"},{footer:t(()=>[l("div",ts,[e(z,{onClick:d[1]||(d[1]=D=>p.value=!1)},{default:t(()=>[...d[4]||(d[4]=[_("取消",-1)])]),_:1}),e(z,{type:"primary",onClick:P},{default:t(()=>[...d[5]||(d[5]=[_("确定",-1)])]),_:1})])]),default:t(()=>[l("div",Ja,[e(M,{modelValue:$.value,"onUpdate:modelValue":d[0]||(d[0]=D=>$.value=D)},{default:t(()=>[l("div",Qa,[(m(!0),k(se,null,oe(A.value,D=>(m(),W(V,{key:D.id,label:D.id,class:"account-item"},{default:t(()=>[l("div",Za,[l("span",es,I(D.name),1)])]),_:2},1032,["label"]))),128))])]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])])}}},as=Q(ls,[["__scopeId","data-v-6501bc5d"]]),ss={class:"schedule-section"},os={class:"schedule-controls"},ns={key:0,class:"schedule-settings"},is={class:"schedule-item"},ds={class:"schedule-item"},us={class:"time-selectors"},rs={class:"schedule-item"},cs={__name:"ScheduleSettings",props:{scheduleEnabled:{type:Boolean,default:!1},videosPerDay:{type:Number,default:1},dailyTimes:{type:Array,default:()=>["10:00"]},startDays:{type:Number,default:0}},emits:["update:scheduleEnabled","update:videosPerDay","update:dailyTimes","update:startDays"],setup(a,{emit:i}){const n=a,f=i,o=X({get:()=>n.scheduleEnabled,set:P=>f("update:scheduleEnabled",P)}),u=X({get:()=>n.videosPerDay,set:P=>f("update:videosPerDay",P)}),p=X({get:()=>n.dailyTimes,set:P=>f("update:dailyTimes",P)}),$=X({get:()=>n.startDays,set:P=>f("update:startDays",P)}),A=P=>{P||(f("update:videosPerDay",1),f("update:dailyTimes",["10:00"]),f("update:startDays",0))},E=()=>{if(p.value.length<u.value){const P=[...p.value,"10:00"];f("update:dailyTimes",P)}};return(P,S)=>{const b=g("el-switch"),w=g("el-option"),d=g("el-select"),R=g("el-time-select"),z=g("el-button");return m(),k("div",ss,[S[7]||(S[7]=l("h3",null,"定时发布",-1)),l("div",os,[e(b,{modelValue:o.value,"onUpdate:modelValue":S[0]||(S[0]=V=>o.value=V),"active-text":"定时发布","inactive-text":"立即发布",onChange:A},null,8,["modelValue"]),o.value?(m(),k("div",ns,[l("div",is,[S[3]||(S[3]=l("span",{class:"label"},"每天发布视频数：",-1)),e(d,{modelValue:u.value,"onUpdate:modelValue":S[1]||(S[1]=V=>u.value=V),placeholder:"选择发布数量"},{default:t(()=>[(m(),k(se,null,oe(55,V=>e(w,{key:V,label:V,value:V},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),l("div",ds,[S[5]||(S[5]=l("span",{class:"label"},"每天发布时间：",-1)),l("div",us,[(m(!0),k(se,null,oe(p.value,(V,M)=>(m(),W(R,{key:M,modelValue:p.value[M],"onUpdate:modelValue":B=>p.value[M]=B,start:"00:00",step:"00:30",end:"23:30",placeholder:"选择时间"},null,8,["modelValue","onUpdate:modelValue"]))),128)),p.value.length<u.value?(m(),W(z,{key:0,type:"primary",size:"small",onClick:E},{default:t(()=>[...S[4]||(S[4]=[_(" 添加时间 ",-1)])]),_:1})):Y("",!0)])]),l("div",rs,[S[6]||(S[6]=l("span",{class:"label"},"开始天数：",-1)),e(d,{modelValue:$.value,"onUpdate:modelValue":S[2]||(S[2]=V=>$.value=V),placeholder:"选择开始天数"},{default:t(()=>[e(w,{label:"明天",value:0}),e(w,{label:"后天",value:1})]),_:1},8,["modelValue"])])])):Y("",!0)])])}}},ps=Q(cs,[["__scopeId","data-v-7e1e15aa"]]),ms={class:"title-section"},fs={key:0,class:"error-message"},vs={__name:"TitleInput",props:{modelValue:{type:String,default:""},platformKey:{type:Number,required:!0},validateOnInput:{type:Boolean,default:!0}},emits:["update:modelValue","validation-change"],setup(a,{expose:i,emit:n}){const f=a,o=n,u=X(()=>he(f.platformKey)),p=X({get:()=>f.modelValue,set:b=>o("update:modelValue",b)}),$=X(()=>u.value.titlePlaceholder),A=X(()=>u.value.titleLimit),E=N(""),P=b=>{if(f.validateOnInput){const w=Ue(b,f.platformKey);E.value=w.valid?"":w.message,o("validation-change",w)}};return i({validate:()=>{const b=Ue(f.modelValue,f.platformKey);return E.value=b.valid?"":b.message,o("validation-change",b),b}}),(b,w)=>{const d=g("el-input"),R=g("el-alert");return m(),k("div",ms,[w[1]||(w[1]=l("h3",null,"标题",-1)),e(d,{modelValue:p.value,"onUpdate:modelValue":w[0]||(w[0]=z=>p.value=z),type:"textarea",rows:3,placeholder:$.value,maxlength:A.value,"show-word-limit":"",class:"title-input",onInput:P},null,8,["modelValue","placeholder","maxlength"]),E.value?(m(),k("div",fs,[e(R,{title:E.value,type:"error",closable:!1,"show-icon":"",class:"error-alert"},null,8,["title"])])):Y("",!0)])}}},be=Q(vs,[["__scopeId","data-v-f75530ea"]]),_s={class:"topic-section"},gs={class:"topic-display"},ys={class:"selected-topics"},hs={key:0,class:"topic-tips"},bs={key:1,class:"error-message"},$s={class:"topic-dialog-content"},ws={class:"custom-topic-input"},Vs={class:"recommended-topics"},ks={class:"topic-grid"},Cs={class:"dialog-footer"},Ts={__name:"TopicInput",props:{modelValue:{type:Array,default:()=>[]},platformKey:{type:Number,required:!0},validateOnInput:{type:Boolean,default:!0}},emits:["update:modelValue","validation-change"],setup(a,{expose:i,emit:n}){const f=a,o=n,u=X(()=>he(f.platformKey)),p=X({get:()=>f.modelValue,set:B=>o("update:modelValue",B)}),$=X(()=>p.value.length>=u.value.topicLimit),A=N(""),E=N(!1),P=N(""),S=["游戏","知识","自动化","系统平台","自媒体工具","跨境电商","科技","教程","云手机平台","云电脑平台","脚本","开源","健康","时尚","美妆","摄影","宠物","汽车"],b=()=>{if($.value){T.warning(`最多只能添加${u.value.topicLimit}个话题`);return}E.value=!0},w=()=>{if(!P.value.trim()){T.warning("请输入话题内容");return}const B=ha(P.value.trim());if(!B.valid){T.error(B.message);return}if($.value){T.warning(`最多只能添加${u.value.topicLimit}个话题`);return}p.value.includes(P.value.trim())?T.warning("话题已存在"):(p.value.push(P.value.trim()),P.value="",T.success("话题添加成功"),V())},d=B=>{if($.value&&!p.value.includes(B)){T.warning(`最多只能添加${u.value.topicLimit}个话题`);return}const D=p.value.indexOf(B);D>-1?p.value.splice(D,1):p.value.push(B),V()},R=B=>{p.value.splice(B,1),V()},z=()=>{E.value=!1,P.value="",T.success("添加话题完成")},V=()=>{if(f.validateOnInput){const B=Pe(p.value,f.platformKey);A.value=B.valid?"":B.message,o("validation-change",B)}};return i({validate:()=>{const B=Pe(f.modelValue,f.platformKey);return A.value=B.valid?"":B.message,o("validation-change",B),B}}),(B,D)=>{const J=g("el-tag"),j=g("el-button"),C=g("el-alert"),y=g("el-input"),K=g("el-dialog");return m(),k("div",_s,[D[9]||(D[9]=l("h3",null,"话题",-1)),l("div",gs,[l("div",ys,[(m(!0),k(se,null,oe(p.value,(H,te)=>(m(),W(J,{key:te,closable:"",onClose:ae=>R(te),class:"topic-tag"},{default:t(()=>[_(" #"+I(H),1)]),_:2},1032,["onClose"]))),128))]),e(j,{type:"primary",plain:"",onClick:b,class:"select-topic-btn",disabled:$.value},{default:t(()=>[...D[3]||(D[3]=[_(" 添加话题 ",-1)])]),_:1},8,["disabled"])]),u.value?(m(),k("div",hs,[e(C,{title:`已添加 ${p.value.length}/${u.value.topicLimit} 个话题`,type:$.value?"warning":"info",closable:!1,"show-icon":"",class:"topic-alert"},null,8,["title","type"])])):Y("",!0),A.value?(m(),k("div",bs,[e(C,{title:A.value,type:"error",closable:!1,"show-icon":"",class:"error-alert"},null,8,["title"])])):Y("",!0),e(K,{modelValue:E.value,"onUpdate:modelValue":D[2]||(D[2]=H=>E.value=H),title:"添加话题",width:"600px",class:"topic-dialog"},{footer:t(()=>[l("div",Cs,[e(j,{onClick:D[1]||(D[1]=H=>E.value=!1)},{default:t(()=>[...D[7]||(D[7]=[_("取消",-1)])]),_:1}),e(j,{type:"primary",onClick:z},{default:t(()=>[...D[8]||(D[8]=[_("确定",-1)])]),_:1})])]),default:t(()=>[l("div",$s,[l("div",ws,[e(y,{modelValue:P.value,"onUpdate:modelValue":D[0]||(D[0]=H=>P.value=H),placeholder:"输入自定义话题",class:"custom-input",onKeyup:Ye(w,["enter"])},{prepend:t(()=>[...D[4]||(D[4]=[_("#",-1)])]),_:1},8,["modelValue"]),e(j,{type:"primary",onClick:w},{default:t(()=>[...D[5]||(D[5]=[_("添加",-1)])]),_:1})]),l("div",Vs,[D[6]||(D[6]=l("h4",null,"推荐话题",-1)),l("div",ks,[(m(),k(se,null,oe(S,H=>e(j,{key:H,type:p.value.includes(H)?"primary":"default",onClick:te=>d(H),class:"topic-btn",disabled:p.value.includes(H)&&$.value},{default:t(()=>[_(I(H),1)]),_:2},1032,["type","onClick","disabled"])),64))])])])]),_:1},8,["modelValue"])])}}},$e=Q(Ts,[["__scopeId","data-v-b3973a1b"]]),As={class:"xiaohongshu-form"},Us={__name:"XiaohongshuForm",props:{title:{type:String,default:""},titleModifiers:{},topics:{type:Array,default:()=>[]},topicsModifiers:{}},emits:fe(["validation-change"],["update:title","update:topics"]),setup(a){const i=ee(a,"title"),n=ee(a,"topics");return(f,o)=>(m(),k("div",As,[e(be,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=u=>i.value=u),"platform-key":1,onValidationChange:o[1]||(o[1]=u=>f.$emit("validation-change","title",u))},null,8,["modelValue"]),e($e,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=u=>n.value=u),"platform-key":1,onValidationChange:o[3]||(o[3]=u=>f.$emit("validation-change","topics",u))},null,8,["modelValue"])]))}},Ps=Q(Us,[["__scopeId","data-v-755d8f6d"]]),xs={class:"wechat-video-form"},Ms={__name:"WechatVideoForm",props:{title:{type:String,default:""},titleModifiers:{},topics:{type:Array,default:()=>[]},topicsModifiers:{}},emits:fe(["validation-change"],["update:title","update:topics"]),setup(a){const i=ee(a,"title"),n=ee(a,"topics");return(f,o)=>(m(),k("div",xs,[e(be,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=u=>i.value=u),"platform-key":2,onValidationChange:o[1]||(o[1]=u=>f.$emit("validation-change","title",u))},null,8,["modelValue"]),e($e,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=u=>n.value=u),"platform-key":2,onValidationChange:o[3]||(o[3]=u=>f.$emit("validation-change","topics",u))},null,8,["modelValue"])]))}},Ss=Q(Ms,[["__scopeId","data-v-e4342bc4"]]),Ds={class:"douyin-form"},Ls={__name:"DouyinForm",props:{title:{type:String,default:""},titleModifiers:{},topics:{type:Array,default:()=>[]},topicsModifiers:{}},emits:fe(["validation-change"],["update:title","update:topics"]),setup(a){const i=ee(a,"title"),n=ee(a,"topics");return(f,o)=>(m(),k("div",Ds,[e(be,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=u=>i.value=u),"platform-key":3,onValidationChange:o[1]||(o[1]=u=>f.$emit("validation-change","title",u))},null,8,["modelValue"]),e($e,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=u=>n.value=u),"platform-key":3,onValidationChange:o[3]||(o[3]=u=>f.$emit("validation-change","topics",u))},null,8,["modelValue"])]))}},Is=Q(Ls,[["__scopeId","data-v-8f8e36c0"]]),Es={class:"kuaishou-form"},zs={__name:"KuaishouForm",props:{title:{type:String,default:""},titleModifiers:{},topics:{type:Array,default:()=>[]},topicsModifiers:{}},emits:fe(["validation-change"],["update:title","update:topics"]),setup(a){const i=ee(a,"title"),n=ee(a,"topics");return(f,o)=>(m(),k("div",Es,[e(be,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=u=>i.value=u),"platform-key":4,onValidationChange:o[1]||(o[1]=u=>f.$emit("validation-change","title",u))},null,8,["modelValue"]),e($e,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=u=>n.value=u),"platform-key":4,onValidationChange:o[3]||(o[3]=u=>f.$emit("validation-change","topics",u))},null,8,["modelValue"])]))}},Bs=Q(zs,[["__scopeId","data-v-567a13dc"]]),Fs={class:"bilibili-form"},Rs={class:"bili-specific-fields"},Os={class:"field-tips"},qs={class:"field-tips"},Ks={class:"field-tips"},Ns={class:"field-tips"},js={class:"field-tips"},Hs={class:"schedule-setting"},Ys={key:0,class:"schedule-datetime"},Ws={class:"field-tips"},Xs={__name:"BilibiliForm",props:{title:{type:String,default:""},titleModifiers:{},topics:{type:Array,default:()=>[]},topicsModifiers:{},biliType:{type:String,default:"自制"},biliTypeModifiers:{},biliPartition:{type:String,default:""},biliPartitionModifiers:{},biliDesc:{type:String,default:""},biliDescModifiers:{},scheduleEnabled:{type:Boolean,default:!1},scheduleEnabledModifiers:{},scheduleTime:{type:String,default:""},scheduleTimeModifiers:{}},emits:fe(["validation-change"],["update:title","update:topics","update:biliType","update:biliPartition","update:biliDesc","update:scheduleEnabled","update:scheduleTime"]),setup(a){const i=ee(a,"title"),n=ee(a,"topics"),f=ee(a,"biliType"),o=ee(a,"biliPartition"),u=ee(a,"biliDesc"),p=ee(a,"scheduleEnabled"),$=ee(a,"scheduleTime"),A=S=>{const b=new Date,w=new Date(b.getTime()+10080*60*1e3);return S.getTime()<b.getTime()||S.getTime()>w.getTime()},E=()=>{const S=new Date;return new Date($.value).toDateString()===S.toDateString()?Array.from({length:S.getHours()},(w,d)=>d):[]},P=S=>{const b=new Date;return new Date($.value).toDateString()===b.toDateString()&&S===b.getHours()?Array.from({length:b.getMinutes()},(d,R)=>R):[]};return(S,b)=>{const w=g("el-input"),d=g("el-text"),R=g("el-form-item"),z=g("el-radio"),V=g("el-radio-group"),M=g("el-option"),B=g("el-select"),D=g("el-switch"),J=g("el-date-picker"),j=g("el-form");return m(),k("div",Fs,[l("div",Rs,[e(j,{"label-width":"90px"},{default:t(()=>[e(R,{label:"标题",required:""},{default:t(()=>[e(w,{modelValue:i.value,"onUpdate:modelValue":b[0]||(b[0]=C=>i.value=C),placeholder:"请输入稿件标题",maxlength:"80","show-word-limit":"",clearable:""},null,8,["modelValue"]),l("div",Os,[e(d,{size:"small",type:"info"},{default:t(()=>[...b[7]||(b[7]=[_("好的标题有助于作品获得更多推荐",-1)])]),_:1})])]),_:1}),e(R,{label:"类型",required:""},{default:t(()=>[e(V,{modelValue:f.value,"onUpdate:modelValue":b[1]||(b[1]=C=>f.value=C)},{default:t(()=>[e(z,{label:"自制"},{default:t(()=>[...b[8]||(b[8]=[_("自制",-1)])]),_:1}),e(z,{label:"转载"},{default:t(()=>[...b[9]||(b[9]=[_("转载",-1)])]),_:1})]),_:1},8,["modelValue"]),l("div",qs,[e(d,{size:"small",type:"info"},{default:t(()=>[...b[10]||(b[10]=[_("自制=原创内容，转载=搬运内容",-1)])]),_:1})])]),_:1}),e(R,{label:"分区",required:""},{default:t(()=>[e(B,{modelValue:o.value,"onUpdate:modelValue":b[2]||(b[2]=C=>o.value=C),placeholder:"请选择分区",filterable:"",clearable:"",style:{width:"100%"}},{default:t(()=>[e(M,{label:"影视",value:"影视"}),e(M,{label:"娱乐",value:"娱乐"}),e(M,{label:"音乐",value:"音乐"}),e(M,{label:"舞蹈",value:"舞蹈"}),e(M,{label:"动画",value:"动画"}),e(M,{label:"绘画",value:"绘画"}),e(M,{label:"鬼畜",value:"鬼畜"}),e(M,{label:"游戏",value:"游戏"}),e(M,{label:"资讯",value:"资讯"}),e(M,{label:"知识",value:"知识"}),e(M,{label:"人工智能",value:"人工智能"}),e(M,{label:"科技数码",value:"科技数码"}),e(M,{label:"汽车",value:"汽车"}),e(M,{label:"时尚美妆",value:"时尚美妆"}),e(M,{label:"家装房产",value:"家装房产"}),e(M,{label:"户外潮流",value:"户外潮流"}),e(M,{label:"健身",value:"健身"}),e(M,{label:"体育运动",value:"体育运动"}),e(M,{label:"手工",value:"手工"}),e(M,{label:"美食",value:"美食"}),e(M,{label:"小剧场",value:"小剧场"}),e(M,{label:"旅游出行",value:"旅游出行"}),e(M,{label:"三农",value:"三农"}),e(M,{label:"动物",value:"动物"}),e(M,{label:"亲子",value:"亲子"}),e(M,{label:"健康",value:"健康"}),e(M,{label:"情感",value:"情感"}),e(M,{label:"vlog",value:"vlog"}),e(M,{label:"生活兴趣",value:"生活兴趣"}),e(M,{label:"生活经验",value:"生活经验"})]),_:1},8,["modelValue"]),l("div",Ks,[e(d,{size:"small",type:"warning"},{default:t(()=>[...b[11]||(b[11]=[_(" ⚠️ 分区选项需要根据B站实际页面更新。请访问 ",-1),l("a",{href:"https://member.bilibili.com/platform/upload/video/frame",target:"_blank",style:{color:"#409eff"}}," B站上传页面 ",-1),_(" 查看实际分区列表。 ",-1)])]),_:1})])]),_:1}),e(R,{label:"标签",required:""},{default:t(()=>[e(B,{modelValue:n.value,"onUpdate:modelValue":b[3]||(b[3]=C=>n.value=C),multiple:"",filterable:"","allow-create":"",placeholder:"输入标签并按回车添加，最多10个标签",style:{width:"100%"},"max-collapse-tags":3,"collapse-tags":"","collapse-tags-tooltip":""},null,8,["modelValue"]),l("div",Ns,[e(d,{size:"small",type:"info"},{default:t(()=>[...b[12]||(b[12]=[_("标签有助于更多用户发现你的视频，最多添加10个",-1)])]),_:1})])]),_:1}),e(R,{label:"简介"},{default:t(()=>[e(w,{modelValue:u.value,"onUpdate:modelValue":b[4]||(b[4]=C=>u.value=C),type:"textarea",rows:5,maxlength:"2000","show-word-limit":"",placeholder:"填写更全面的相关信息，让更多的人能够找到你的视频吧",resize:"vertical"},null,8,["modelValue"]),l("div",js,[e(d,{size:"small",type:"info"},{default:t(()=>[...b[13]||(b[13]=[_("简介支持@用户、#话题、超链接",-1)])]),_:1})])]),_:1}),e(R,{label:"定时发布"},{default:t(()=>[l("div",Hs,[e(D,{modelValue:p.value,"onUpdate:modelValue":b[5]||(b[5]=C=>p.value=C),"active-text":"启用定时发布","inactive-text":"立即发布"},null,8,["modelValue"]),p.value?(m(),k("div",Ys,[e(J,{modelValue:$.value,"onUpdate:modelValue":b[6]||(b[6]=C=>$.value=C),type:"datetime",placeholder:"选择发布时间",format:"YYYY-MM-DD HH:mm","value-format":"YYYY-MM-DD HH:mm","disabled-date":A,"disabled-hours":E,"disabled-minutes":P,style:{width:"100%","margin-top":"8px"}},null,8,["modelValue"])])):Y("",!0)]),l("div",Ws,[e(d,{size:"small",type:"info"},{default:t(()=>[...b[14]||(b[14]=[_("可设置未来7天内的发布时间",-1)])]),_:1})])]),_:1})]),_:1})])])}}},Gs=Q(Xs,[["__scopeId","data-v-3a018c0c"]]),Js={class:"common-form"},Qs={class:"common-notice"},Zs={__name:"CommonForm",props:fe({platformKey:{type:Number,required:!0}},{title:{type:String,default:""},titleModifiers:{},topics:{type:Array,default:()=>[]},topicsModifiers:{}}),emits:fe(["validation-change"],["update:title","update:topics"]),setup(a){const i=ee(a,"title"),n=ee(a,"topics");return(f,o)=>{const u=g("el-alert");return m(),k("div",Js,[e(be,{modelValue:i.value,"onUpdate:modelValue":o[0]||(o[0]=p=>i.value=p),"platform-key":a.platformKey,onValidationChange:o[1]||(o[1]=p=>f.$emit("validation-change","title",p))},null,8,["modelValue","platform-key"]),e($e,{modelValue:n.value,"onUpdate:modelValue":o[2]||(o[2]=p=>n.value=p),"platform-key":a.platformKey,onValidationChange:o[3]||(o[3]=p=>f.$emit("validation-change","topics",p))},null,8,["modelValue","platform-key"]),l("div",Qs,[e(u,{title:"通用表单",description:"当前平台使用通用表单模板，如需平台专属字段，请联系开发者添加。",type:"info",closable:!1,"show-icon":""})])])}}},eo=Q(Zs,[["__scopeId","data-v-4cc75321"]]),to={class:"publish-center"},lo={class:"publish-content"},ao={class:"tab-content-wrapper"},so={key:0,class:"publish-status"},oo={class:"platform-forms"},no={class:"action-buttons"},io={class:"publish-progress"},uo={key:0,class:"current-publishing"},ro={key:1,class:"publish-results"},co={class:"label"},po={class:"message"},mo={class:"dialog-footer"},fo={__name:"PublishCenter",setup(a){const i="http://localhost:5409",n=X(()=>({Authorization:`Bearer ${localStorage.getItem("token")||""}`})),f=N("tab1");let o=1;const u=Te(),p=Me(),$=X(()=>u.materials),A={1:"小红书",2:"视频号",3:"抖音",4:"快手",5:"B站"},E=N(!1);xe(async()=>{try{const h=await Ve.getValidAccounts({validate:0});h&&h.code===200&&Array.isArray(h.data)&&p.setAccounts(h.data)}catch(h){console.warn("初始化获取账号失败",h)}});const P=ve([{name:"tab1",label:A[1],fileList:[],displayFileList:[],selectedAccounts:[],selectedPlatform:1,title:"",selectedTopics:[],biliType:"自制",biliPartition:"",biliDesc:"",scheduleTime:"",scheduleEnabled:!1,videosPerDay:1,dailyTimes:["10:00"],startDays:0,publishStatus:null,validationErrors:{}}]),S=N(!1),b=N(null),w=N(0),d=N([]),R=N(!1),z=()=>{o++;const h={name:`tab${o}`,label:A[1],fileList:[],displayFileList:[],selectedAccounts:[],selectedPlatform:1,title:"",selectedTopics:[],biliType:"自制",biliPartition:"",biliDesc:"",scheduleTime:"",scheduleEnabled:!1,videosPerDay:1,dailyTimes:["10:00"],startDays:0,publishStatus:null,validationErrors:{}};P.push(h),f.value=h.name},V=h=>{const U=P.findIndex(O=>O.name===h);U>-1&&(P.splice(U,1),f.value===h&&P.length>0&&(f.value=P[0].name))},M=h=>{const U=P.find(O=>O.name===f.value);U&&(U.selectedAccounts=[],C(U))},B=(h,U,O)=>{U.valid?delete O.validationErrors[h]:O.validationErrors[h]=U.message},D=(h,U,O)=>{if(h.code===200){const x=h.data.path||h.data,s=x.split("/").pop(),q={name:U.name,url:pe.getMaterialPreviewUrl(s),path:x,size:U.size,type:U.type};O.fileList.push(q),O.displayFileList=[...O.fileList.map(L=>({name:L.name,url:L.url}))],T.success("文件上传成功"),console.log("上传成功:",q)}else T.error(h.msg||"上传失败")},J=(h,U)=>{h.forEach(O=>{const x=$.value.find(s=>s.id===O);if(x){const s={name:x.filename,url:pe.getMaterialPreviewUrl(x.file_path.split("/").pop()),path:x.file_path,size:x.filesize*1024*1024,type:"video/mp4"};U.fileList.some(L=>L.path===s.path)||U.fileList.push(s)}}),U.displayFileList=[...U.fileList.map(O=>({name:O.name,url:O.url}))]},j=(h,U)=>{h.fileList.splice(U,1),h.displayFileList=[...h.fileList.map(O=>({name:O.name,url:O.url}))],T.success("文件删除成功")},C=h=>{const U=A[h.selectedPlatform],O=h.selectedAccounts||[];if(U&&O.length>0){const x=p.accounts.find(q=>q.id===O[0]),s=(x==null?void 0:x.name)||"";h.label=s?`${U}_${s}`:`${U}`}else if(U)h.label=U;else{const x=P.findIndex(s=>s.name===h.name);h.label=`发布${x+1}`}};We(P,()=>{P.forEach(C)},{deep:!0});const y=h=>{T.info("已取消发布")},K=async h=>new Promise((U,O)=>{const x=ba(h);if(!x.valid){const q=Object.values(x.errors)[0];T.error(q),O(new Error(q));return}const s={type:h.selectedPlatform,title:h.title,tags:h.selectedTopics,fileList:h.fileList.map(q=>q.path),accountList:h.selectedAccounts.map(q=>{const L=p.accounts.find(c=>c.id===q);return L?L.filePath:q}),enableTimer:h.scheduleEnabled?1:0,videosPerDay:h.scheduleEnabled&&h.videosPerDay||1,dailyTimes:h.scheduleEnabled?h.dailyTimes||["10:00"]:["10:00"],startDays:h.scheduleEnabled&&h.startDays||0,category:0};h.selectedPlatform===5&&(s.biliType=h.biliType,s.biliPartition=h.biliPartition,s.biliDesc=h.biliDesc),fetch(`${i}/postVideo`,{method:"POST",headers:{"Content-Type":"application/json",...n.value},body:JSON.stringify(s)}).then(q=>q.json()).then(q=>{q.code===200?(h.publishStatus={message:"发布成功",type:"success"},h.fileList=[],h.displayFileList=[],h.title="",h.selectedTopics=[],h.selectedAccounts=[],h.scheduleEnabled=!1,h.validationErrors={},U()):(h.publishStatus={message:`发布失败：${q.msg||"发布失败"}`,type:"error"},O(new Error(q.msg||"发布失败")))}).catch(q=>{console.error("发布错误:",q),h.publishStatus={message:"发布失败，请检查网络连接",type:"error"},O(q)})}),H=()=>{const h=[];return P.forEach(U=>{const O=[];(!U.fileList||U.fileList.length===0)&&O.push("未上传视频"),(!U.selectedAccounts||U.selectedAccounts.length===0)&&O.push("未选择账号"),O.length&&h.push({tab:U,message:`${U.label}: ${O.join("、")}`})}),h},te=async()=>{if(E.value)return;const h=H();if(h.length>0){f.value=h[0].tab.name,h[0].tab.publishStatus={message:h[0].message,type:"error"};try{await ye.alert(h.map(U=>U.message).join(`
`),"请完善发布项后再批量发布",{confirmButtonText:"好的"})}catch{}T.error("存在未准备完成的发布项：请为每个发布项上传视频并选择账号");return}E.value=!0,b.value=null,w.value=0,d.value=[],R.value=!1,S.value=!0;try{for(let s=0;s<P.length;s++){if(R.value){d.value.push({label:P[s].label,status:"cancelled",message:"已取消"});continue}const q=P[s];b.value=q,w.value=Math.floor(s/P.length*100);try{await K(q),d.value.push({label:q.label,status:"success",message:"发布成功"})}catch(L){d.value.push({label:q.label,status:"error",message:L.message})}}w.value=100;const U=d.value.filter(s=>s.status==="success").length,O=d.value.filter(s=>s.status==="error").length,x=d.value.filter(s=>s.status==="cancelled").length;R.value?T.warning(`发布已取消：${U}个成功，${O}个失败，${x}个未执行`):O>0?T.error(`发布完成：${U}个成功，${O}个失败`):(T.success("所有Tab发布成功"),setTimeout(()=>{S.value=!1},1e3))}catch(U){console.error("批量发布出错:",U),T.error("批量发布出错，请重试")}finally{E.value=!1,R.value=!1}},ae=()=>{R.value=!0,T.info("正在取消发布...")};return(h,U)=>{const O=g("el-alert"),x=g("el-button"),s=g("el-progress"),q=g("el-icon"),L=g("el-dialog");return m(),k("div",to,[e(Aa,{tabs:P,"active-tab":f.value,"batch-publishing":E.value,onTabChange:U[0]||(U[0]=c=>f.value=c),onRemoveTab:V,onAddTab:z,onBatchPublish:te},null,8,["tabs","active-tab","batch-publishing"]),l("div",lo,[l("div",ao,[(m(!0),k(se,null,oe(P,c=>ke((m(),k("div",{key:c.name,class:"tab-content"},[c.publishStatus?(m(),k("div",so,[e(O,{title:c.publishStatus.message,type:c.publishStatus.type,closable:!1,"show-icon":""},null,8,["title","type"])])):Y("",!0),e(Ka,{"file-list":c.fileList,"upload-action":`${F(i)}/upload`,"auth-headers":n.value,materials:$.value,onRemoveFile:r=>j(c,r),onUploadSuccess:(r,G)=>D(r,G,c),onMaterialSelected:r=>J(r,c)},null,8,["file-list","upload-action","auth-headers","materials","onRemoveFile","onUploadSuccess","onMaterialSelected"]),e(Ya,{modelValue:c.selectedPlatform,"onUpdate:modelValue":r=>c.selectedPlatform=r,onPlatformChange:M},null,8,["modelValue","onUpdate:modelValue"]),e(as,{modelValue:c.selectedAccounts,"onUpdate:modelValue":r=>c.selectedAccounts=r,"platform-key":c.selectedPlatform},null,8,["modelValue","onUpdate:modelValue","platform-key"]),l("div",oo,[c.selectedPlatform===1?(m(),W(Ps,{key:0,title:c.title,"onUpdate:title":r=>c.title=r,topics:c.selectedTopics,"onUpdate:topics":r=>c.selectedTopics=r,onValidationChange:(r,G)=>B(r,G,c)},null,8,["title","onUpdate:title","topics","onUpdate:topics","onValidationChange"])):Y("",!0),c.selectedPlatform===2?(m(),W(Ss,{key:1,title:c.title,"onUpdate:title":r=>c.title=r,topics:c.selectedTopics,"onUpdate:topics":r=>c.selectedTopics=r,onValidationChange:(r,G)=>B(r,G,c)},null,8,["title","onUpdate:title","topics","onUpdate:topics","onValidationChange"])):Y("",!0),c.selectedPlatform===3?(m(),W(Is,{key:2,title:c.title,"onUpdate:title":r=>c.title=r,topics:c.selectedTopics,"onUpdate:topics":r=>c.selectedTopics=r,onValidationChange:(r,G)=>B(r,G,c)},null,8,["title","onUpdate:title","topics","onUpdate:topics","onValidationChange"])):Y("",!0),c.selectedPlatform===4?(m(),W(Bs,{key:3,title:c.title,"onUpdate:title":r=>c.title=r,topics:c.selectedTopics,"onUpdate:topics":r=>c.selectedTopics=r,onValidationChange:(r,G)=>B(r,G,c)},null,8,["title","onUpdate:title","topics","onUpdate:topics","onValidationChange"])):Y("",!0),c.selectedPlatform===5?(m(),W(Gs,{key:4,title:c.title,"onUpdate:title":r=>c.title=r,topics:c.selectedTopics,"onUpdate:topics":r=>c.selectedTopics=r,"bili-type":c.biliType,"onUpdate:biliType":r=>c.biliType=r,"bili-partition":c.biliPartition,"onUpdate:biliPartition":r=>c.biliPartition=r,"bili-desc":c.biliDesc,"onUpdate:biliDesc":r=>c.biliDesc=r,"schedule-enabled":c.scheduleEnabled,"onUpdate:scheduleEnabled":r=>c.scheduleEnabled=r,"schedule-time":c.scheduleTime,"onUpdate:scheduleTime":r=>c.scheduleTime=r,onValidationChange:(r,G)=>B(r,G,c)},null,8,["title","onUpdate:title","topics","onUpdate:topics","bili-type","onUpdate:biliType","bili-partition","onUpdate:biliPartition","bili-desc","onUpdate:biliDesc","schedule-enabled","onUpdate:scheduleEnabled","schedule-time","onUpdate:scheduleTime","onValidationChange"])):Y("",!0),[1,2,3,4,5].includes(c.selectedPlatform)?Y("",!0):(m(),W(eo,{key:5,title:c.title,"onUpdate:title":r=>c.title=r,topics:c.selectedTopics,"onUpdate:topics":r=>c.selectedTopics=r,"platform-key":c.selectedPlatform,onValidationChange:(r,G)=>B(r,G,c)},null,8,["title","onUpdate:title","topics","onUpdate:topics","platform-key","onValidationChange"]))]),c.selectedPlatform!==5?(m(),W(ps,{key:1,"schedule-enabled":c.scheduleEnabled,"onUpdate:scheduleEnabled":r=>c.scheduleEnabled=r,"videos-per-day":c.videosPerDay,"onUpdate:videosPerDay":r=>c.videosPerDay=r,"daily-times":c.dailyTimes,"onUpdate:dailyTimes":r=>c.dailyTimes=r,"start-days":c.startDays,"onUpdate:startDays":r=>c.startDays=r},null,8,["schedule-enabled","onUpdate:scheduleEnabled","videos-per-day","onUpdate:videosPerDay","daily-times","onUpdate:dailyTimes","start-days","onUpdate:startDays"])):Y("",!0),l("div",no,[e(x,{size:"small",onClick:r=>y()},{default:t(()=>[...U[3]||(U[3]=[_("取消",-1)])]),_:1},8,["onClick"]),e(x,{size:"small",type:"primary",onClick:r=>K(c)},{default:t(()=>[...U[4]||(U[4]=[_("发布",-1)])]),_:1},8,["onClick"])])])),[[Ae,f.value===c.name]])),128))])]),e(L,{modelValue:S.value,"onUpdate:modelValue":U[2]||(U[2]=c=>S.value=c),title:"批量发布进度",width:"500px","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},{footer:t(()=>[l("div",mo,[e(x,{onClick:ae,disabled:w.value===100},{default:t(()=>[...U[5]||(U[5]=[_(" 取消发布 ",-1)])]),_:1},8,["disabled"]),w.value===100?(m(),W(x,{key:0,type:"primary",onClick:U[1]||(U[1]=c=>S.value=!1)},{default:t(()=>[...U[6]||(U[6]=[_(" 关闭 ",-1)])]),_:1})):Y("",!0)])]),default:t(()=>[l("div",io,[e(s,{percentage:w.value,status:w.value===100?"success":""},null,8,["percentage","status"]),b.value?(m(),k("div",uo," 正在发布："+I(b.value.label),1)):Y("",!0),d.value.length>0?(m(),k("div",ro,[(m(!0),k(se,null,oe(d.value,(c,r)=>(m(),k("div",{key:r,class:de(["result-item",c.status])},[c.status==="success"?(m(),W(q,{key:0},{default:t(()=>[e(F(pt))]),_:1})):c.status==="error"?(m(),W(q,{key:1},{default:t(()=>[e(F(Ee))]),_:1})):(m(),W(q,{key:2},{default:t(()=>[e(F(mt))]),_:1})),l("span",co,I(c.label),1),l("span",po,I(c.message),1)],2))),128))])):Y("",!0)])]),_:1},8,["modelValue"])])}}},vo=Q(fo,[["__scopeId","data-v-cdc7a2a5"]]),_o={class:"about"},go={__name:"About",setup(a){return(i,n)=>(m(),k("div",_o,[...n[0]||(n[0]=[l("h1",null,"关于我们",-1),l("p",null,"这是关于页面",-1)])]))}},yo=Q(go,[["__scopeId","data-v-cd67ee8e"]]),ho=[{path:"/",name:"Dashboard",component:nl},{path:"/account-management",name:"AccountManagement",component:Zl},{path:"/material-management",name:"MaterialManagement",component:ga},{path:"/publish-center",name:"PublishCenter",component:vo},{path:"/about",name:"About",component:yo}],bo=Xe({history:Ge(),routes:ho}),$o=Je(),we=Qe(Ct);for(const[a,i]of Object.entries(ft))we.component(a,i);we.use(bo);we.use($o);we.use(vt);we.mount("#app");
